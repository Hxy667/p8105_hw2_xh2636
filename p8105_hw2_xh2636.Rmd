---
title: "p8105_hw2_xh2636"
author: "Xiaoyu Huang"
date: "2023-09-28"
output: html_document
---

## Problem 1
```{r}
library(tidyverse)
library(dplyr)
```

## P1-1st part
```{r}
pols_month_data = read_csv("./data/pols-month.csv")%>%
  janitor::clean_names()%>%
  separate(mon, into = c("year","month","day"),
           sep = "-", convert = TRUE) %>% 
  mutate(month = recode(month, "1" = "January", "2" = "February", "3" = "March", 
                        "4" = "April", "5" = "May", "6" = "June", "7" = "July", 
                        "8" = "August","9" = "September", "10" = "October", 
                        "11" = "November", "12" = "December"))%>%
  mutate(president = recode(.x = prez_dem, '0' = "gop", '1' = "dem"))%>%
  select(-prez_dem, -prez_gop, -day)%>%
  relocate(year, month, president)
view(pols_month_data)
```

## P1-2nd part
```{r}
snpdata = read_csv("./data/snp.csv")%>%
separate(date, into = c("month", "day","year"), sep = "/", convert = TRUE)%>%
mutate(month = recode(month, "1" = "January", "2" = "February", "3" = "March", 
                        "4" = "April", "5" = "May", "6" = "June", "7" = "July", 
                        "8" = "August","9" = "September", "10" = "October", 
                        "11" = "November", "12" = "December"))%>%
mutate(year = as.numeric(year)) %>%
  mutate(year = ifelse(year > 49, year + 1900, year + 2000))%>%
select(-day)%>%
  relocate(year, month)
view(snpdata)
```

## P1-3rd part
```{r}
unemploydata = read_csv("./data/unemployment.csv")%>%
janitor::clean_names()%>%
  pivot_longer(cols = jan:dec,
               names_to = "month",
               values_to = "Percentage_of_unemployment")%>%
mutate(month = recode(month, "jan" = "January", "feb" = "February", 
                      "mar" = "March", "apr" = "April", "may" = "May", "jun" = "June", 
                      "jul" = "July", "aug" = "August", "sep" = "September", 
                      "oct" = "October","nov" = "November", "dec" = "December"))
view(unemploydata)
```

## Binding Data
```{r}
merge_data = left_join(pols_month_data, snpdata,
                       by = c("year", "month"))%>%
  left_join(unemploydata, by = c("year", "month"))%>%
relocate(year, month, president)
view(merge_data)
```

For the first data set "pols_month_data", we have 822 rows and 9 columns. The range for this data set is 1947-2015, which contain important information related to the number of national politicians who are democratic or republican at any given time. The key variable is create a president variable taking values "gop" and "dem". For the second data set "snpdata", we have 787 rows and 2 columns. The range for this data set is 1950-2015, which contain the date of the observation and the closing values of the S&P stock index on the associated date. For the third data set "unemploydata", we have 68 rows and 13 columns. The range for this data set is 1948-2015, which contain the year of the measurements and percentage of unemployment in the particular month of the associated year. The result is that after organizing these data in various ways, such as arranging them by year and month, etc., we can integrate three different excel data for easy viewing.

## Problem 2
```{r}
MrTrashdata = readxl::read_excel("./data/202207 Trash Wheel Collection Data.xlsx",
                                 sheet = "Mr. Trash Wheel",
                                 range = "A2:N549")%>%
  janitor::clean_names()%>%
filter(homes_powered!=0.000)%>%
  drop_na()%>%
  mutate(homes_powered = (weight_tons * 500)/30)
view(MrTrashdata)
```

```{r}
ProTrashdata = readxl::read_excel("./data/202207 Trash Wheel Collection Data.xlsx",
                                 sheet = "Professor Trash Wheel",
                                 range = "A2:M96")%>%
  janitor::clean_names()%>%
  drop_na()%>%
  mutate(homes_powered = (weight_tons * 500)/30)
view(ProTrashdata)
```

```{r}
Gwyndata = readxl::read_excel("./data/202207 Trash Wheel Collection Data.xlsx",
                                 sheet = "Gwynnda Trash Wheel",
                                 range = "A2:K108")%>%
  janitor::clean_names()%>%
  drop_na()%>%
  mutate(homes_powered = (weight_tons * 500)/30)
view(Gwyndata)
```

## Binding data
```{r}
Mr_Trash_Wheel <- MrTrashdata %>%
  mutate(wheel_name = "Mr. Trash Wheel")
Professor_Trash_Wheel <- ProTrashdata %>%
  mutate(wheel_name = "Professor Trash Wheel")
Gwynna_Trash_Wheel <- Gwyndata %>%
  mutate(wheel_name = "Gwynna Trash Wheel")
Mr_Trash_Wheel$year <- as.numeric(Mr_Trash_Wheel$year)
Professor_Trash_Wheel$year <- as.numeric(Professor_Trash_Wheel$year)
Gwynna_Trash_Wheel$year <- as.numeric(Gwynna_Trash_Wheel$year)
combined <- bind_rows(Mr_Trash_Wheel, Professor_Trash_Wheel, Gwynna_Trash_Wheel)
drop_na(combined)
view(combined)
```

The Mr.Trash Wheel key variables are different kind of bags, glass bottles, plastic bottles, and sport balls. For the Professor trash wheel, the key variable are also the same as before but no sport balls. For the Gwynna trash wheel, the variable are also same but without sports balls, chip bags, grocery bags, and glass bottle. The dumpster number, trash weight, and home powered are important for all the trash wheels. The total weight of trash collected by Professor Trash Wheel is 190.12 tons, and the total number of cigarette butts collected by Gwynnda in July of 2021 is 16300.

## Probelm 3

