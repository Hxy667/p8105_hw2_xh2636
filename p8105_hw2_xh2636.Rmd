---
title: "p8105_hw2_xh2636"
author: "Xiaoyu Huang"
date: "2023-09-28"
output: html_document
---

## Problem 1
```{r}
library(tidyverse)
library(dplyr)
```

## P1-1st part
```{r}
pols_month_data = read_csv("./data/pols-month.csv")%>%
  janitor::clean_names()%>%
  separate(mon, into = c("year","month","day"),
           sep = "-", convert = TRUE) %>% 
  mutate(month = recode(month, "1" = "January", "2" = "February", "3" = "March", 
                        "4" = "April", "5" = "May", "6" = "June", "7" = "July", 
                        "8" = "August","9" = "September", "10" = "October", 
                        "11" = "November", "12" = "December"))%>%
  mutate(president = recode(.x = prez_dem, '0' = "gop", '1' = "dem"))%>%
  select(-prez_dem, -prez_gop, -day)%>%
  relocate(year, month, president)
```

## P1-2nd part
```{r}
snpdata = read_csv("./data/snp.csv")%>%
separate(date, into = c("month", "day","year"), sep = "/", convert = TRUE)%>%
mutate(month = recode(month, "1" = "January", "2" = "February", "3" = "March", 
                        "4" = "April", "5" = "May", "6" = "June", "7" = "July", 
                        "8" = "August","9" = "September", "10" = "October", 
                        "11" = "November", "12" = "December"))%>%
mutate(year = as.numeric(year)) %>%
  mutate(year = ifelse(year > 49, year + 1900, year + 2000))%>%
select(-day)%>%
  relocate(year, month)
```

## P1-3rd part
```{r}
unemploydata = read_csv("./data/unemployment.csv")%>%
janitor::clean_names()%>%
  pivot_longer(cols = jan:dec,
               names_to = "month",
               values_to = "Percentage_of_unemployment")%>%
mutate(month = recode(month, "jan" = "January", "feb" = "February", 
                      "mar" = "March", "apr" = "April", "may" = "May", "jun" = "June", 
                      "jul" = "July", "aug" = "August", "sep" = "September", 
                      "oct" = "October","nov" = "November", "dec" = "December"))
```

```{r}
merge_data = left_join(pols_month_data, snpdata,
                       by = c("year", "month"))%>%
  left_join(unemploydata, by = c("year", "month"))%>%
relocate(year, month, president)
```

For the first data set "pols_month_data", we have 822 rows and 9 columns. The range for this data set is 1947-2015, which contain important information related to the number of national politicians who are democratic or republican at any given time. The key variable is create a president variable taking values "gop" and "dem". For the second data set "snpdata", we have 787 rows and 2 columns. The range for this data set is 1950-2015, which contain the date of the observation and the closing values of the S&P stock index on the associated date. For the third data set "unemploydata", we have 68 rows and 13 columns. The range for this data set is 1948-2015, which contain the year of the measurements and percentage of unemployment in the particular month of the associated year. The result is that after organizing these data in various ways, such as arranging them by year and month, etc., we can integrate three different excel data for easy viewing.


